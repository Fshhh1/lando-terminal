<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>CHIPS Explorer with Trust Map</title>
  <style>
    body {
      font-family: monospace;
      background: #0e0e0e;
      color: #00ffe0;
      margin: 0;
      padding: 1rem 250px 1rem 1rem;
    }
    h1 { text-align: center; }
    table { width: 100%; background: #111; border-collapse: collapse; margin-top: 2rem; }
    th, td { padding: 0.5rem; border-bottom: 1px solid #00ffe011; text-align: left; }
    th { background: #111; }
    tr:hover { background: #222; }
    a { color: #00ffd0; text-decoration: none; }
    .sidebar {
      position: fixed;
      top: 0;
      right: 0;
      width: 240px;
      height: 100%;
      background: #111;
      border-left: 1px solid #00ffe033;
      padding: 1rem;
      overflow-y: auto;
    }
    .node {
      margin-bottom: 1rem;
      padding-bottom: 0.5rem;
      border-bottom: 1px solid #00ffe011;
    }
    .trusted { color: #00ffcc; }
    .suggested { color: #ffaa00; }
  </style>
</head>
<body>
  <h1>CHIPS:// Node Explorer</h1>
  <table>
    <thead>
      <tr>
        <th>Node</th><th>Status</th><th>Role</th><th>Protection</th><th>Link</th>
      </tr>
    </thead>
    <tbody id="nodeTable">
      <tr>
        <td>admin.dreamspire</td><td>Online</td><td>Sovereign.Admin</td><td>Password</td>
        <td><a href="https://dreamspire-admin1-fn1l.vercel.app" target="_blank">Visit</a></td>
      </tr>
      <tr>
        <td>explorer.chips</td><td>Online</td><td>Public.Registry</td><td>None</td>
        <td><a href="#" target="_blank">Visit</a></td>
      </tr>
      <tr>
        <td>node.lumina</td><td>Online</td><td>Explorer.Agent</td><td>Token</td>
        <td><a href="#" target="_blank">Visit</a></td>
      </tr>
    </tbody>
  </table>

  <div class="sidebar" id="trustMap">
    <h3>Trust Map</h3>
    <div id="trustList">Loading trust data...</div>
  </div>

  <script>
    const trustData = {
      "admin.dreamspire": {
        trustedPeers: ["explorer.chips", "node.lumina"]
      },
      "explorer.chips": {
        trustedPeers: ["node.lumina"]
      },
      "node.lumina": {
        trustedPeers: []
      }
    };

    function renderTrustMap() {
      const trustList = document.getElementById("trustList");
      trustList.innerHTML = "";

      const nodes = Object.keys(trustData);
      nodes.forEach(node => {
        const div = document.createElement("div");
        div.className = "node";
        const peers = trustData[node].trustedPeers || [];
        div.innerHTML = `<strong>${node}</strong><br/>Trusts: `;

        if (peers.length === 0) {
          div.innerHTML += "<em>None</em>";
        } else {
          div.innerHTML += peers.map(p => {
            const reciprocal = trustData[p]?.trustedPeers?.includes(node);
            return `<span class="${reciprocal ? 'trusted' : 'suggested'}">${p}</span>`;
          }).join(", ");
        }

        trustList.appendChild(div);
      });
    }

    window.onload = renderTrustMap;
  </script>
</body>
</html>
